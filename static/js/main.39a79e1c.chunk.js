(this["webpackJsonpnc-news-st-frontend"]=this["webpackJsonpnc-news-st-frontend"]||[]).push([[0],{11:function(t,e,n){},21:function(t,e,n){},30:function(t,e,n){},56:function(t,e,n){},57:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n.n(s),r=n(22),i=n.n(r),a=(n(30),n(25)),o=n(4),l=n(5),u=n(7),d=n(6),j=(n(11),n(2)),m=n(24),h=n.n(m).a.create({baseURL:"https://nc-news-project-st.herokuapp.com/api/"}),p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="";return e&&(n="&topic=".concat(e)),h.get("/articles/?sorted_by=".concat(t,"&limit=10000").concat(n)).then((function(t){return t.data.articles}))},b=function(t,e,n){return h.patch("/".concat(n,"/").concat(t),{inc_votes:e})},f=function(t){return h.get("/articles/".concat(t,"/comments")).then((function(t){return t.data.comments}))},g=function(t,e,n){console.log(t,e,n);return""===n?Promise.reject("cannot submit an empty comment"):h.post("/articles/".concat(t,"/comments"),{username:e,body:n}).then((function(t){return t}))},O=function(t){return h.delete("comments/".concat(t))},x=function(t,e){return t.filter((function(t){return t.comment_id!==e}))},_=n(0),v=function(t){var e=t.article,n=e.author,s=e.created_at,c=e.title,r=e.body,i=e.article_id,a=r;return r.length>70&&(a=r.slice(0,70)+"..."),Object(_.jsxs)("li",{className:"ArticleSummary__li",children:[Object(_.jsxs)("p",{className:"ArticleSummary__author",children:["Author: ",n,". ","Created: ".concat(s.slice(0,10)," at ").concat(s.slice(11,19))]}),Object(_.jsx)(j.a,{to:"/nc-news-st/articles/".concat(i),children:Object(_.jsx)("p",{className:"ArticleSummary__title",children:c})}),Object(_.jsx)("p",{className:"ArticleSummary__preview",children:a}),Object(_.jsx)(j.a,{to:"/nc-news-st/articles/".concat(i),className:"ArticleSummary__linkToArticle",children:Object(_.jsx)("p",{className:"LinktoArticle__text",children:"would you like to know more?"})})]})},y=(n(8),n(56),function(t){return Object(_.jsx)("form",{className:"header__dropdownlist",children:Object(_.jsxs)("label",{children:["Sort by",Object(_.jsxs)("select",{className:"header__selection",onChange:t.handleSort,children:[Object(_.jsx)("option",{value:"created_at",children:"Created At"}),Object(_.jsx)("option",{value:"author",children:"Author"}),Object(_.jsx)("option",{value:"topic",children:"Topic"})]})]})})}),N=function(){return Object(_.jsxs)("section",{children:[Object(_.jsx)("img",{className:"nyan",src:"https://newscrewdriver.files.wordpress.com/2018/10/poptartcat320240.gif?w=320&zoom=2",alt:"nyan cat"}),Object(_.jsx)("p",{className:"nyan__Loading",children:"Loading..."})]})},S=(n(57),function(t){var e=t.msg,n=void 0===e?"wrong path":e,s=t.status,c=void 0===s?404:s;return Object(_.jsx)(_.Fragment,{children:"wrong path"===n?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{to:"/nc-news-st",children:Object(_.jsx)("h4",{children:"Go Back"})}),Object(_.jsx)("h2",{children:"Sorry, we couldn't find what you're looking for"}),Object(_.jsxs)("h2",{children:[n,": ",c]}),Object(_.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/9a/Computer-kitten.jpg",alt:"error cat is on the case",className:"errorHandler"})]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h2",{children:"Sorry, we couldn't find what you're looking for"}),Object(_.jsxs)("h2",{children:[n,": ",c]}),Object(_.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/9a/Computer-kitten.jpg",alt:"error cat is on the case",className:"errorHandler"})]})})}),C=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={articles:[],isLoading:!0,sort_by:"created_at",sorting:!1,filter:"",filtering:!1,errorFound:{found:!1,msg:"",status:""}},t.handleSort=function(e){var n=e.target.value;t.setState((function(){return{sort_by:n,sorting:!0}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;h.get("/articles?limit=10000").then((function(t){return t.data.articles})).then((function(e){t.setState((function(){return{articles:e,isLoading:!1,filter:t.props.topic}}))}))}},{key:"componentDidUpdate",value:function(){var t=this,e=this.state,n=e.sort_by,s=e.sorting,c=e.filtering,r=this.props.filter;s&&p(n,r).then((function(e){t.setState((function(){return{articles:e,isLoading:!1,sorting:!1}}))})).catch((function(e){var n=e.response,s=n.status,c=n.data.msg;t.setState((function(){return{errorFound:{found:!0,msg:c,status:s},filtering:!1,sorting:!1}}))})),c&&p(n,r).then((function(e){t.setState((function(){return{articles:e,isLoading:!1,filtering:!1}}))})).catch((function(e){var n=e.response,s=n.status,c=n.data.msg;t.setState((function(){return{errorFound:{found:!0,msg:c,status:s},filtering:!1,sorting:!1}}))}))}},{key:"render",value:function(){var t=this.state.errorFound,e=t.msg,n=t.status;return this.state.errorFound.found?Object(_.jsx)(S,{msg:e,status:n}):Object(_.jsx)(_.Fragment,{children:this.state.isLoading?Object(_.jsx)(N,{}):Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"App__ArticleList",children:[Object(_.jsxs)("header",{className:"ArticleList__header",children:[Object(_.jsx)("p",{className:"header__title",children:"All NC Articles"}),Object(_.jsx)(y,{handleSort:this.handleSort})]}),0===this.state.articles.length?Object(_.jsx)("p",{children:"No articles found"}):Object(_.jsx)("ul",{className:"ArticleList__ul",children:this.state.articles.map((function(t){return Object(_.jsx)(v,{article:t},t.article_id)}))})]})})})}}]),n}(s.Component),k=function(t){var e=t.topic,n=e.description,s=e.slug;return Object(_.jsx)("li",{className:"ListOfTopics__item",children:Object(_.jsx)(j.a,{to:"/nc-news-st/topics/".concat(s),children:Object(_.jsxs)("p",{className:"ListOfTopics__description",children:["   ",n]})})})},A=(n(58),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={isLoading:!0},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;h.get("/topics?limit=10000").then((function(t){return t.data.topics})).then((function(e){t.setState((function(){return{topics:e,isLoading:!1}}))}))}},{key:"render",value:function(){return Object(_.jsx)(_.Fragment,{children:this.state.isLoading?Object(_.jsx)(N,{}):Object(_.jsxs)("div",{className:"App__ListOfTopics",children:[Object(_.jsx)("p",{className:"App_FeaturedTopics",children:"Todays Hot Topics"}),Object(_.jsx)("ul",{className:"ListOfTopics__list",children:this.state.topics.map((function(t){return Object(_.jsx)(k,{topic:t},t.slug)}))})]})})}}]),n}(s.Component)),F=function(t){return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"homepage",children:[Object(_.jsx)("div",{className:"Homepage__ListOfTopicsHolder",children:Object(_.jsx)(A,{})}),Object(_.jsx)("div",{className:"Homepage__ArticleListPageHolder",children:Object(_.jsx)(C,{filtering:!1})})]})})},w=function(t){var e=t.user,n=t.userLogin,s=t.userLogout,c=t.handleType,r=t.usernameInput,i=void 0===r?"":r;return Object(_.jsxs)(_.Fragment,{children:[" ",""!==e?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("header",{className:"App__title",children:[Object(_.jsx)("h1",{className:"App__name",children:"NC News St"}),Object(_.jsx)("p",{className:"App__user",children:e.slice(0,1).toUpperCase()}),Object(_.jsx)("button",{className:"Title__logout",onClick:s,children:"logout"})]})}):Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("header",{className:"App__title",children:[Object(_.jsx)("h1",{className:"App__name",children:"NC News St"}),Object(_.jsx)("p",{className:"App__user",children:e.slice(0,1).toUpperCase()}),Object(_.jsxs)("form",{className:"Title__login",onSubmit:n,children:[Object(_.jsx)("input",{placeholder:"existing user only - contact admin",className:"Title__loginInput",type:"text",onChange:c,value:i}),Object(_.jsx)("button",{children:"Login"})]})]})})]})},L=function(t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{to:"/nc-news-st",children:Object(_.jsx)("h4",{children:"Go back"})}),Object(_.jsxs)("p",{className:"TopicsPage__ChosenPage",children:["Articles about: ",t.topic,"!"]}),Object(_.jsx)(C,{topic:t.topic,filtering:!0})]})},T=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={id:t.props.id,startingVotes:t.props.votes,voteChange:0,likeDisabled:!1,dislikeDisabled:!1,type:"",user:""},t.handleClick=function(e){var n=t.state,s=n.id,c=n.voteChange,r=t.props.type,i=e;c>=1&&1===e&&(i=0),c<=-1&&-1===e&&(i=0),0===e&&-1===c&&(i=1),0===e&&1===c&&(i=-1),t.setState((function(t){return{voteChange:t.voteChange+i}})),b(s,i,r).then((function(){localStorage.setItem("articleVotes".concat(s),JSON.stringify(t.state))}))},t.fetchVotes=function(){var e=t.state.id,n=JSON.parse(localStorage.getItem("articleVotes".concat(e)));n&&t.setState((function(){return{voteChange:n.voteChange,startingVotes:n.startingVotes}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchVotes()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.fetchVotes()}},{key:"render",value:function(){var t=this,e=this.state,n=e.startingVotes,s=e.voteChange,c=this.props.user;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("p",{className:"VoteCounter__Likes",children:["Likes: ",n+s]}),""===c?Object(_.jsx)(_.Fragment,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{disabled:1===s,onClick:function(){t.handleClick(1)},className:"FullArticle__voteButton",children:Object(_.jsx)("img",{src:"https://icons-for-free.com/iconfiles/png/512/thumbs+thumbs+up+up+vote+icon-1320184637569349118.png",alt:"thumbs up",className:"FullArticle__Thumb"})}),Object(_.jsx)("button",{disabled:0===s,onClick:function(){t.handleClick(0)},className:"FullArticle__voteButton",children:Object(_.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Question_mark_%28black%29.svg/400px-Question_mark_%28black%29.svg.png",alt:"no comment",className:"FullArticle__Thumb"})}),Object(_.jsx)("button",{disabled:-1===s,onClick:function(){t.handleClick(-1)},className:"FullArticle__voteButton",children:Object(_.jsx)("img",{src:"https://cdn0.iconfinder.com/data/icons/communication-183/80/thumbs-down-512.png",alt:"thumbs down",className:"FullArticle__Thumb"})})]})]})}}]),n}(s.Component),U=function(t){var e=t.author,n=t.body,s=t.comment_id,c=t.created_at,r=t.votes,i=t.handleDelete,a=t.user;return Object(_.jsxs)("section",{className:"SingleArticle__comment",children:[Object(_.jsxs)("p",{className:"SingleComment__author",children:["Author: ",e," at ","Created: ".concat(c.slice(0,10)," at ").concat(c.slice(11,19))]}),Object(_.jsx)("p",{className:"SingleComment__body",children:n}),Object(_.jsx)(T,{type:"comments",votes:r,id:s,user:a}),e===a?Object(_.jsx)("button",{onClick:function(){i(s)},children:"remove comment"}):Object(_.jsx)(_.Fragment,{})]})},I=(n(21),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={id:"",user:"",article:null,hideInput:!0,posted:!1,posting:!1,userComment:"",isLoading:!0,comments:{},hideComments:!0,errorFound:{found:!1}},t.handleClick=function(){t.setState((function(t){return{hideInput:!t.hideInput}}))},t.handleSubmit=function(e){var n=t.state.userComment,s=t.props,c=s.id,r=s.user;e.preventDefault(),t.setState((function(){return{posting:!0}})),g(c,r,n).then((function(){t.setState((function(){return{posted:!0,posting:!1,hideComments:!1,userComment:""}}))})).catch((function(e){t.setState((function(){return{errorFound:{found:!0,msg:e}}}))}))},t.handleTyping=function(e){t.setState((function(){return{userComment:e.target.value}}))},t.handleDelete=function(e){t.setState((function(){return{comments:x(t.state.comments,e)}})),O(e)},t.showHideButton=function(){t.setState((function(t){return{hideComments:!t.hideComments}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.article.article_id;f(e).then((function(e){t.setState((function(){return{comments:e,isLoading:!1}}))}))}},{key:"componentDidUpdate",value:function(){var t=this;if(this.state.posted){var e=this.props.article.article_id;f(e).then((function(e){t.setState((function(){return{comments:e,posted:!1}}))}))}}},{key:"render",value:function(){var t=this,e=this.state,n=e.hideInput,s=e.isLoading,c=e.comments,r=e.hideComments,i=e.posting,a=e.userComment,o=e.errorFound,l=o.found,u=o.msg,d=this.props.user;return Object(_.jsx)(_.Fragment,{children:s?Object(_.jsx)(N,{}):Object(_.jsxs)(_.Fragment,{children:[""===d?Object(_.jsx)(_.Fragment,{}):Object(_.jsx)("button",{className:"PostCommentToArticle__postButton",onClick:this.handleClick,children:"Click to share your opinion"}),n||""===d?Object(_.jsx)(_.Fragment,{}):Object(_.jsxs)("form",{className:"PostCommentToArticle__submitForm",onSubmit:this.handleSubmit,children:[Object(_.jsx)("label",{children:Object(_.jsx)("textarea",{className:"PostCommentToArticle__submitInput",onChange:this.handleTyping,type:"text",placeholder:"tell us what you think",value:a})}),Object(_.jsx)("button",{className:"PostComment__submitButton",disabled:i,children:"Submit"}),l?Object(_.jsx)("p",{children:u}):Object(_.jsx)(_.Fragment,{})]}),i?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(N,{})}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("p",{className:"PostComment__Title",children:"User comments"}),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{className:"PostComment__ShowButton",onClick:this.showHideButton,children:"Click me"}),r?Object(_.jsx)(_.Fragment,{}):Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("ul",{className:"SingleComment__commentList",id:"SingleComment__commentList",children:0===c.length?Object(_.jsx)("p",{children:"No comments found"}):c.map((function(e){var n=e.author,s=e.body,c=e.comment_id,r=e.created_at,i=e.votes;return Object(_.jsx)(U,{author:n,body:s,created_at:r,votes:i,comment_id:c,user:d,handleDelete:t.handleDelete},c)}))})})]})]})})}}]),n}(s.Component)),D=function(t){var e=t.user,n=t.article;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("main",{className:"FullArticle__mainArticle",children:[Object(_.jsxs)("p",{className:"FullArticle__Author",children:["Author: ",n.author]}),Object(_.jsx)("p",{className:"FullArticle__ArticleText",children:n.body}),Object(_.jsx)("section",{className:"FullArticle__votesCounter",children:Object(_.jsx)(T,{type:"articles",votes:n.votes,id:n.article_id,user:e})})]})})},B=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={article:{},isLoading:!0,user:"",errorFound:{found:!1,msg:"",status:""}},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t,e=this;(t=this.props.article_id,h.get("/articles/".concat(t)).then((function(t){return t.data.article}))).then((function(t){e.setState((function(){return{article:t,isLoading:!1,user:e.props.user}}))})).catch((function(t){var n=t.response,s=n.status,c=n.data.msg;e.setState((function(){return{errorFound:{found:!0,msg:c,status:s}}}))}))}},{key:"render",value:function(){var t=this.state.errorFound,e=t.msg,n=t.status;if(this.state.errorFound.found)return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{to:"/nc-news-st",children:Object(_.jsx)("h4",{children:"Go Back"})}),Object(_.jsx)(S,{msg:e,status:n})]});var s=this.state.article,c=this.props.user;return Object(_.jsx)(_.Fragment,{children:this.state.isLoading?Object(_.jsx)(N,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{to:"/nc-news-st",children:Object(_.jsx)("h4",{children:"Go Back"})}),Object(_.jsxs)("p",{className:"SingleArticlePage__title",children:["Article: ",s.title]}),Object(_.jsx)(D,{id:s.article_id,user:c,article:s}),Object(_.jsx)("section",{className:"SingleArticle__CommentsSection",children:Object(_.jsx)(I,{id:s.article_id,user:c,article:s})})]})})}}]),n}(s.Component),P=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={user:"jessjelly",usernameInput:"",invalidUsername:!1,savedUser:!1},t.handleType=function(e){var n=e.target.value;t.setState((function(){return{usernameInput:n}}))},t.userLogin=function(e){e.preventDefault();var n=t.state.usernameInput;!1===/^[a-z]+[0-9]*$/.test(n)?t.setState((function(){return{invalidUsername:!0}})):t.setState((function(t){return{user:t.usernameInput,usernameInput:""}}),(function(){localStorage.setItem("currentUser",JSON.stringify(t.state)),t.setState((function(){return{savedUser:!0}}))}))},t.userLogout=function(){t.setState((function(){return{user:""}}),(function(){localStorage.setItem("currentUser",JSON.stringify(t.state)),t.setState((function(){return{savedUser:!0}}))}))},t.fetchUser=function(){var e=JSON.parse(localStorage.getItem("currentUser"));t.setState((function(){return Object(a.a)({},e)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"componentDidUpdate",value:function(){this.state.savedUser&&(window.location.reload(),this.setState((function(){return{savedUser:!1}})))}},{key:"render",value:function(){var t=this.state,e=t.user,n=t.usernameInput,s=t.invalidUsername;return Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(w,{user:e,userLogin:this.userLogin,userLogout:this.userLogout,handleType:this.handleType,usernameInput:n,invalidUsername:s}),Object(_.jsxs)(j.b,{primary:!1,children:[Object(_.jsx)(F,{path:"/"}),Object(_.jsx)(F,{path:"/nc-news-st"}),Object(_.jsx)(L,{path:"/nc-news-st/topics/:topic"}),Object(_.jsx)(B,{path:"nc-news-st/articles/:article_id",user:e}),Object(_.jsx)(S,{default:!0})]})]})}}]),n}(s.Component);i.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(P,{})}),document.getElementById("root"))},8:function(t,e,n){}},[[59,1,2]]]);
//# sourceMappingURL=main.39a79e1c.chunk.js.map